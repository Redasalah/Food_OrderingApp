{"ast":null,"code":"var _jsxFileName = \"/Users/akr4m/Desktop/Food_OrderingApp/frontend/src/pages/delivery/DeliveryOrderPage.jsx\",\n  _s = $RefreshSig$();\n// src/pages/delivery/DeliveryOrderPage.jsx\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { useAuth } from '../../context/AuthContext';\nimport '../../styles/delivery/DeliveryOrderPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DeliveryOrderPage = () => {\n  _s();\n  var _order$restaurant, _order$restaurant2, _order$orderItems;\n  const {\n    orderId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user\n  } = useAuth();\n  const [order, setOrder] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [currentStatus, setCurrentStatus] = useState('');\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState(false);\n  const [deliveryNotes, setDeliveryNotes] = useState('');\n  const [customerContactAttempted, setCustomerContactAttempted] = useState(false);\n\n  // Define status steps for the progress indicator\n  const DELIVERY_STEPS = [{\n    id: 'READY_FOR_PICKUP',\n    label: 'Ready for Pickup'\n  }, {\n    id: 'OUT_FOR_DELIVERY',\n    label: 'Out for Delivery'\n  }, {\n    id: 'DELIVERED',\n    label: 'Delivered'\n  }];\n\n  // Fetch order details on component mount\n  useEffect(() => {\n    const fetchOrderDetails = async () => {\n      try {\n        setLoading(true);\n        const token = localStorage.getItem('token');\n        const response = await axios.get(`http://localhost:8080/api/delivery/orders/${orderId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log('Order details:', response.data);\n        setOrder(response.data);\n        setCurrentStatus(response.data.status);\n        setLoading(false);\n      } catch (err) {\n        var _err$response;\n        console.error('Error fetching order details:', err);\n        console.error('Error details:', (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data);\n        setError('Failed to fetch order details. Please try again later.');\n        setLoading(false);\n      }\n    };\n    fetchOrderDetails();\n  }, [orderId]);\n\n  // Update order status\n  const updateOrderStatus = async newStatus => {\n    try {\n      const token = localStorage.getItem('token');\n      console.log(`Updating order ${orderId} status to ${newStatus}`);\n      const response = await axios.put(`http://localhost:8080/api/delivery/orders/${orderId}/status`, {\n        status: newStatus\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log('Order status updated:', response.data);\n      setOrder(response.data);\n      setCurrentStatus(response.data.status);\n\n      // Close confirmation modal if it's open\n      setIsConfirmModalOpen(false);\n\n      // If order is completed, redirect after a delay\n      if (newStatus === 'DELIVERED') {\n        setTimeout(() => {\n          navigate('/delivery/available-orders');\n        }, 3000);\n      }\n      return true;\n    } catch (err) {\n      var _err$response2;\n      console.error('Error updating order status:', err);\n      console.error('Error details:', (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data);\n      setError('Failed to update order status. Please try again.');\n      return false;\n    }\n  };\n\n  // Handle pickup confirmation\n  const handlePickupConfirm = async () => {\n    await updateOrderStatus('OUT_FOR_DELIVERY');\n  };\n\n  // Handle delivery confirmation click (show confirmation modal)\n  const handleDeliveryConfirm = () => {\n    setIsConfirmModalOpen(true);\n  };\n\n  // Handle final delivery completion\n  const completeDelivery = async () => {\n    await updateOrderStatus('DELIVERED');\n  };\n\n  // Cancel confirmation modal\n  const cancelConfirmation = () => {\n    setIsConfirmModalOpen(false);\n  };\n\n  // Open Google Maps navigation\n  const openNavigation = address => {\n    // Format the address for Google Maps URL\n    const formattedAddress = encodeURIComponent(address);\n    window.open(`https://www.google.com/maps/search/?api=1&query=${formattedAddress}`, '_blank');\n  };\n\n  // Call customer\n  const callCustomer = phoneNumber => {\n    setCustomerContactAttempted(true);\n    window.location.href = `tel:${phoneNumber}`;\n  };\n\n  // Format currency\n  const formatCurrency = amount => {\n    return `$${parseFloat(amount).toFixed(2)}`;\n  };\n\n  // Return a loading state while fetching data\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"delivery-order-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-message\",\n        children: \"Loading order details...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Return an error message if there was a problem\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"delivery-order-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/delivery/available-orders'),\n          className: \"back-button\",\n          children: \"Back to Available Orders\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this);\n  }\n\n  // If no order found\n  if (!order) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"delivery-order-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-order-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Order not found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/delivery/available-orders'),\n          className: \"back-button\",\n          children: \"Back to Available Orders\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Calculate which steps are complete\n  const getStepStatus = stepId => {\n    const stepIndex = DELIVERY_STEPS.findIndex(step => step.id === stepId);\n    const currentIndex = DELIVERY_STEPS.findIndex(step => step.id === currentStatus);\n    if (currentIndex >= stepIndex) {\n      return 'completed';\n    }\n    return '';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"delivery-order-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"delivery-order-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Order #\", orderId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-badge\",\n        children: currentStatus.replace(/_/g, ' ')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"delivery-progress\",\n      children: DELIVERY_STEPS.map((step, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `progress-step ${getStepStatus(step.id)}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-number\",\n          children: index + 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-label\",\n          children: step.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }, this), index < DELIVERY_STEPS.length - 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"connector-line\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 51\n        }, this)]\n      }, step.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"order-details-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"location-card restaurant-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Pickup From\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"location-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: order.restaurantName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: ((_order$restaurant = order.restaurant) === null || _order$restaurant === void 0 ? void 0 : _order$restaurant.address) || order.pickupAddress || \"Address not available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Phone: \", ((_order$restaurant2 = order.restaurant) === null || _order$restaurant2 === void 0 ? void 0 : _order$restaurant2.phone) || \"Not available\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"navigation-button\",\n          onClick: () => {\n            var _order$restaurant3;\n            return openNavigation(((_order$restaurant3 = order.restaurant) === null || _order$restaurant3 === void 0 ? void 0 : _order$restaurant3.address) || order.pickupAddress);\n          },\n          children: \"Navigate to Restaurant\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"location-card customer-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Deliver To\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"location-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: order.userName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: order.deliveryAddress\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Phone: \", order.userPhone || \"Not available\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"customer-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"call-button\",\n            onClick: () => callCustomer(order.userPhone),\n            disabled: !order.userPhone,\n            children: \"Call Customer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"navigation-button\",\n            onClick: () => openNavigation(order.deliveryAddress),\n            children: \"Navigate to Customer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"order-items-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Order Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"items-list\",\n          children: (_order$orderItems = order.orderItems) === null || _order$orderItems === void 0 ? void 0 : _order$orderItems.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"order-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"item-quantity\",\n              children: [item.quantity, \"x\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"item-name\",\n              children: item.menuItemName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"item-price\",\n              children: formatCurrency(item.price * item.quantity)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 17\n            }, this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"order-summary\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Subtotal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: formatCurrency(order.subtotal)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Delivery Fee\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: formatCurrency(order.deliveryFee)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Tax\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: formatCurrency(order.tax)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-row total\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: formatCurrency(order.total)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), order.specialInstructions && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"special-instructions\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Special Instructions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: order.specialInstructions\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"delivery-notes\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Delivery Notes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          placeholder: \"Add notes about the delivery (optional)\",\n          value: deliveryNotes,\n          onChange: e => setDeliveryNotes(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"delivery-actions\",\n        children: [currentStatus === 'READY_FOR_PICKUP' && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"action-button pickup-button\",\n          onClick: handlePickupConfirm,\n          children: \"Confirm Pickup from Restaurant\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }, this), currentStatus === 'OUT_FOR_DELIVERY' && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"action-button deliver-button\",\n          onClick: handleDeliveryConfirm,\n          children: \"Confirm Delivery to Customer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 13\n        }, this), currentStatus === 'DELIVERED' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"delivery-complete-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u2713 Delivery completed successfully!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"action-button new-order-button\",\n            onClick: () => navigate('/delivery/available-orders'),\n            children: \"Find New Orders\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), isConfirmModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"confirmation-modal\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Confirm Delivery\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please confirm that you've delivered the order to the customer:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"confirmation-checklist\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"checklist-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: customerContactAttempted,\n              onChange: () => setCustomerContactAttempted(!customerContactAttempted)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this), \"I've made contact with the customer\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: cancelConfirmation,\n            className: \"cancel-button\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: completeDelivery,\n            className: \"confirm-button\",\n            disabled: !customerContactAttempted,\n            children: \"Confirm Delivery\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 5\n  }, this);\n};\n_s(DeliveryOrderPage, \"dtPTmxl2GdJIKmxPufMWeHktAz4=\", false, function () {\n  return [useParams, useNavigate, useAuth];\n});\n_c = DeliveryOrderPage;\nexport default DeliveryOrderPage;\nvar _c;\n$RefreshReg$(_c, \"DeliveryOrderPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","useAuth","jsxDEV","_jsxDEV","DeliveryOrderPage","_s","_order$restaurant","_order$restaurant2","_order$orderItems","orderId","navigate","user","order","setOrder","loading","setLoading","error","setError","currentStatus","setCurrentStatus","isConfirmModalOpen","setIsConfirmModalOpen","deliveryNotes","setDeliveryNotes","customerContactAttempted","setCustomerContactAttempted","DELIVERY_STEPS","id","label","fetchOrderDetails","token","localStorage","getItem","response","get","headers","Authorization","console","log","data","status","err","_err$response","updateOrderStatus","newStatus","put","setTimeout","_err$response2","handlePickupConfirm","handleDeliveryConfirm","completeDelivery","cancelConfirmation","openNavigation","address","formattedAddress","encodeURIComponent","window","open","callCustomer","phoneNumber","location","href","formatCurrency","amount","parseFloat","toFixed","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","getStepStatus","stepId","stepIndex","findIndex","step","currentIndex","replace","map","index","length","restaurantName","restaurant","pickupAddress","phone","_order$restaurant3","userName","deliveryAddress","userPhone","disabled","orderItems","item","quantity","menuItemName","price","subtotal","deliveryFee","tax","total","specialInstructions","placeholder","value","onChange","e","target","type","checked","_c","$RefreshReg$"],"sources":["/Users/akr4m/Desktop/Food_OrderingApp/frontend/src/pages/delivery/DeliveryOrderPage.jsx"],"sourcesContent":["// src/pages/delivery/DeliveryOrderPage.jsx\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { useAuth } from '../../context/AuthContext';\nimport '../../styles/delivery/DeliveryOrderPage.css';\n\nconst DeliveryOrderPage = () => {\n  const { orderId } = useParams();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  \n  const [order, setOrder] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [currentStatus, setCurrentStatus] = useState('');\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState(false);\n  const [deliveryNotes, setDeliveryNotes] = useState('');\n  const [customerContactAttempted, setCustomerContactAttempted] = useState(false);\n\n  // Define status steps for the progress indicator\n  const DELIVERY_STEPS = [\n    { id: 'READY_FOR_PICKUP', label: 'Ready for Pickup' },\n    { id: 'OUT_FOR_DELIVERY', label: 'Out for Delivery' },\n    { id: 'DELIVERED', label: 'Delivered' }\n  ];\n\n  // Fetch order details on component mount\n  useEffect(() => {\n    const fetchOrderDetails = async () => {\n      try {\n        setLoading(true);\n        const token = localStorage.getItem('token');\n        \n        const response = await axios.get(`http://localhost:8080/api/delivery/orders/${orderId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        \n        console.log('Order details:', response.data);\n        setOrder(response.data);\n        setCurrentStatus(response.data.status);\n        setLoading(false);\n      } catch (err) {\n        console.error('Error fetching order details:', err);\n        console.error('Error details:', err.response?.data);\n        setError('Failed to fetch order details. Please try again later.');\n        setLoading(false);\n      }\n    };\n\n    fetchOrderDetails();\n  }, [orderId]);\n\n  // Update order status\n  const updateOrderStatus = async (newStatus) => {\n    try {\n      const token = localStorage.getItem('token');\n      console.log(`Updating order ${orderId} status to ${newStatus}`);\n      \n      const response = await axios.put(\n        `http://localhost:8080/api/delivery/orders/${orderId}/status`, \n        { status: newStatus },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }\n      );\n      \n      console.log('Order status updated:', response.data);\n      setOrder(response.data);\n      setCurrentStatus(response.data.status);\n      \n      // Close confirmation modal if it's open\n      setIsConfirmModalOpen(false);\n      \n      // If order is completed, redirect after a delay\n      if (newStatus === 'DELIVERED') {\n        setTimeout(() => {\n          navigate('/delivery/available-orders');\n        }, 3000);\n      }\n      \n      return true;\n    } catch (err) {\n      console.error('Error updating order status:', err);\n      console.error('Error details:', err.response?.data);\n      setError('Failed to update order status. Please try again.');\n      return false;\n    }\n  };\n\n  // Handle pickup confirmation\n  const handlePickupConfirm = async () => {\n    await updateOrderStatus('OUT_FOR_DELIVERY');\n  };\n\n  // Handle delivery confirmation click (show confirmation modal)\n  const handleDeliveryConfirm = () => {\n    setIsConfirmModalOpen(true);\n  };\n\n  // Handle final delivery completion\n  const completeDelivery = async () => {\n    await updateOrderStatus('DELIVERED');\n  };\n\n  // Cancel confirmation modal\n  const cancelConfirmation = () => {\n    setIsConfirmModalOpen(false);\n  };\n\n  // Open Google Maps navigation\n  const openNavigation = (address) => {\n    // Format the address for Google Maps URL\n    const formattedAddress = encodeURIComponent(address);\n    window.open(`https://www.google.com/maps/search/?api=1&query=${formattedAddress}`, '_blank');\n  };\n\n  // Call customer\n  const callCustomer = (phoneNumber) => {\n    setCustomerContactAttempted(true);\n    window.location.href = `tel:${phoneNumber}`;\n  };\n\n  // Format currency\n  const formatCurrency = (amount) => {\n    return `$${parseFloat(amount).toFixed(2)}`;\n  };\n\n  // Return a loading state while fetching data\n  if (loading) {\n    return (\n      <div className=\"delivery-order-container\">\n        <div className=\"loading-message\">Loading order details...</div>\n      </div>\n    );\n  }\n\n  // Return an error message if there was a problem\n  if (error) {\n    return (\n      <div className=\"delivery-order-container\">\n        <div className=\"error-message\">\n          <p>{error}</p>\n          <button onClick={() => navigate('/delivery/available-orders')} className=\"back-button\">\n            Back to Available Orders\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // If no order found\n  if (!order) {\n    return (\n      <div className=\"delivery-order-container\">\n        <div className=\"no-order-message\">\n          <p>Order not found</p>\n          <button onClick={() => navigate('/delivery/available-orders')} className=\"back-button\">\n            Back to Available Orders\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Calculate which steps are complete\n  const getStepStatus = (stepId) => {\n    const stepIndex = DELIVERY_STEPS.findIndex(step => step.id === stepId);\n    const currentIndex = DELIVERY_STEPS.findIndex(step => step.id === currentStatus);\n    \n    if (currentIndex >= stepIndex) {\n      return 'completed';\n    }\n    return '';\n  };\n\n  return (\n    <div className=\"delivery-order-container\">\n      <div className=\"delivery-order-header\">\n        <h1>Order #{orderId}</h1>\n        <div className=\"status-badge\">{currentStatus.replace(/_/g, ' ')}</div>\n      </div>\n\n      {/* Delivery Progress Tracker */}\n      <div className=\"delivery-progress\">\n        {DELIVERY_STEPS.map((step, index) => (\n          <div key={step.id} className={`progress-step ${getStepStatus(step.id)}`}>\n            <div className=\"step-number\">{index + 1}</div>\n            <div className=\"step-label\">{step.label}</div>\n            {index < DELIVERY_STEPS.length - 1 && <div className=\"connector-line\"></div>}\n          </div>\n        ))}\n      </div>\n\n      <div className=\"order-details-card\">\n        {/* Restaurant Info */}\n        <div className=\"location-card restaurant-card\">\n          <h2>Pickup From</h2>\n          <div className=\"location-details\">\n            <h3>{order.restaurantName}</h3>\n            <p>{order.restaurant?.address || order.pickupAddress || \"Address not available\"}</p>\n            <p>Phone: {order.restaurant?.phone || \"Not available\"}</p>\n          </div>\n          <button \n            className=\"navigation-button\"\n            onClick={() => openNavigation(order.restaurant?.address || order.pickupAddress)}\n          >\n            Navigate to Restaurant\n          </button>\n        </div>\n\n        {/* Customer Info */}\n        <div className=\"location-card customer-card\">\n          <h2>Deliver To</h2>\n          <div className=\"location-details\">\n            <h3>{order.userName}</h3>\n            <p>{order.deliveryAddress}</p>\n            <p>Phone: {order.userPhone || \"Not available\"}</p>\n          </div>\n          <div className=\"customer-actions\">\n            <button \n              className=\"call-button\"\n              onClick={() => callCustomer(order.userPhone)}\n              disabled={!order.userPhone}\n            >\n              Call Customer\n            </button>\n            <button \n              className=\"navigation-button\"\n              onClick={() => openNavigation(order.deliveryAddress)}\n            >\n              Navigate to Customer\n            </button>\n          </div>\n        </div>\n\n        {/* Order Items */}\n        <div className=\"order-items-section\">\n          <h2>Order Items</h2>\n          <ul className=\"items-list\">\n            {order.orderItems?.map(item => (\n              <li key={item.id} className=\"order-item\">\n                <span className=\"item-quantity\">{item.quantity}x</span>\n                <span className=\"item-name\">{item.menuItemName}</span>\n                <span className=\"item-price\">{formatCurrency(item.price * item.quantity)}</span>\n              </li>\n            ))}\n          </ul>\n\n          {/* Order Summary */}\n          <div className=\"order-summary\">\n            <div className=\"summary-row\">\n              <span>Subtotal</span>\n              <span>{formatCurrency(order.subtotal)}</span>\n            </div>\n            <div className=\"summary-row\">\n              <span>Delivery Fee</span>\n              <span>{formatCurrency(order.deliveryFee)}</span>\n            </div>\n            <div className=\"summary-row\">\n              <span>Tax</span>\n              <span>{formatCurrency(order.tax)}</span>\n            </div>\n            <div className=\"summary-row total\">\n              <span>Total</span>\n              <span>{formatCurrency(order.total)}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Special Instructions */}\n        {order.specialInstructions && (\n          <div className=\"special-instructions\">\n            <h2>Special Instructions</h2>\n            <p>{order.specialInstructions}</p>\n          </div>\n        )}\n\n        {/* Delivery Notes */}\n        <div className=\"delivery-notes\">\n          <h2>Delivery Notes</h2>\n          <textarea\n            placeholder=\"Add notes about the delivery (optional)\"\n            value={deliveryNotes}\n            onChange={(e) => setDeliveryNotes(e.target.value)}\n          ></textarea>\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"delivery-actions\">\n          {currentStatus === 'READY_FOR_PICKUP' && (\n            <button \n              className=\"action-button pickup-button\"\n              onClick={handlePickupConfirm}\n            >\n              Confirm Pickup from Restaurant\n            </button>\n          )}\n          \n          {currentStatus === 'OUT_FOR_DELIVERY' && (\n            <button \n              className=\"action-button deliver-button\"\n              onClick={handleDeliveryConfirm}\n            >\n              Confirm Delivery to Customer\n            </button>\n          )}\n          \n          {currentStatus === 'DELIVERED' && (\n            <div className=\"delivery-complete-message\">\n              <p>âœ“ Delivery completed successfully!</p>\n              <button \n                className=\"action-button new-order-button\"\n                onClick={() => navigate('/delivery/available-orders')}\n              >\n                Find New Orders\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Delivery Confirmation Modal */}\n      {isConfirmModalOpen && (\n        <div className=\"confirmation-modal\">\n          <div className=\"modal-content\">\n            <h3>Confirm Delivery</h3>\n            \n            <p>Please confirm that you've delivered the order to the customer:</p>\n            \n            <div className=\"confirmation-checklist\">\n              <label className=\"checklist-item\">\n                <input \n                  type=\"checkbox\" \n                  checked={customerContactAttempted}\n                  onChange={() => setCustomerContactAttempted(!customerContactAttempted)} \n                />\n                I've made contact with the customer\n              </label>\n            </div>\n            \n            <div className=\"modal-actions\">\n              <button onClick={cancelConfirmation} className=\"cancel-button\">\n                Cancel\n              </button>\n              <button \n                onClick={completeDelivery} \n                className=\"confirm-button\"\n                disabled={!customerContactAttempted}\n              >\n                Confirm Delivery\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DeliveryOrderPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}