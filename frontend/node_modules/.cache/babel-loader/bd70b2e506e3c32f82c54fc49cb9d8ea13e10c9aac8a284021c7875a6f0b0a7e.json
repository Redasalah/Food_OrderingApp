{"ast":null,"code":"var _jsxFileName = \"/Users/akr4m/Desktop/Food_OrderingApp/frontend/src/pages/delivery/DeliveryDashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DeliveryDashboard = () => {\n  _s();\n  const {\n    currentUser\n  } = useAuth();\n  const navigate = useNavigate();\n  const [dashboardData, setDashboardData] = useState({\n    activeDelivery: null,\n    deliveredToday: 0,\n    totalEarningsToday: 0,\n    isActive: false,\n    availableOrders: 0,\n    recentDeliveries: []\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [notification, setNotification] = useState(null);\n  const wsRef = useRef(null);\n\n  // Initialize WebSocket connection for real-time updates\n  useEffect(() => {\n    if (!currentUser || !currentUser.token) return;\n\n    // Close any existing connection\n    if (wsRef.current) {\n      wsRef.current.close();\n    }\n\n    // Create new WebSocket connection\n    const wsUrl = `${process.env.REACT_APP_WS_URL || 'wss://api.yourbackend.com'}/orders`;\n    wsRef.current = new WebSocket(wsUrl);\n    wsRef.current.onopen = () => {\n      console.log('WebSocket connection established');\n      // Identify as a delivery person\n      wsRef.current.send(JSON.stringify({\n        type: 'IDENTIFY',\n        role: 'DELIVERY',\n        deliveryPersonId: currentUser.id\n      }));\n    };\n    wsRef.current.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'NEW_AVAILABLE_ORDER') {\n        // Handle new order available for delivery\n        showNotification('New order available for delivery!');\n        fetchDashboardData();\n      } else if (data.type === 'ORDER_ASSIGNED' && data.deliveryPersonId === currentUser.id) {\n        // Handle order assigned to this delivery person\n        showNotification(`Order #${data.orderId} has been assigned to you.`);\n        fetchDashboardData();\n      } else if (data.type === 'ORDER_UPDATE') {\n        // General order updates\n        if (data.status === 'READY_FOR_PICKUP') {\n          showNotification('New order ready for pickup!');\n          fetchDashboardData();\n        } else if (data.deliveryPersonId === currentUser.id) {\n          // Update for your assigned order\n          showNotification(`Order #${data.orderId} status updated to ${data.status}`);\n          fetchDashboardData();\n        }\n      } else if (data.type === 'EARNING_UPDATE' && data.deliveryPersonId === currentUser.id) {\n        // Handle earnings update\n        showNotification(`New earnings: $${data.amount.toFixed(2)}`);\n        fetchDashboardData();\n      }\n    };\n    wsRef.current.onerror = error => {\n      console.error('WebSocket error:', error);\n    };\n    wsRef.current.onclose = () => {\n      console.log('WebSocket connection closed');\n    };\n    return () => {\n      if (wsRef.current) {\n        wsRef.current.close();\n      }\n    };\n  }, [currentUser]);\n\n  // Function to show notification\n  const showNotification = message => {\n    setNotification(message);\n    // Clear notification after 5 seconds\n    setTimeout(() => {\n      setNotification(null);\n    }, 5000);\n  };\n\n  // Fetch dashboard data\n  const fetchDashboardData = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get('/api/delivery/dashboard', {\n        headers: {\n          Authorization: `Bearer ${currentUser.token}`\n        }\n      });\n      setDashboardData(response.data);\n      setLoading(false);\n    } catch (err) {\n      setError('Failed to fetch dashboard data. Please try again later.');\n      setLoading(false);\n      console.error('Error fetching dashboard data:', err);\n    }\n  };\n  useEffect(() => {\n    if (currentUser && currentUser.token) {\n      fetchDashboardData();\n\n      // Refresh data every minute as a fallback to WebSockets\n      const interval = setInterval(fetchDashboardData, 60000);\n      return () => clearInterval(interval);\n    }\n  }, [currentUser]);\n\n  // Handle toggle active status\n  const toggleActiveStatus = async () => {\n    try {\n      const newStatus = !dashboardData.isActive;\n      await axios.post('/api/delivery/toggle-status', {\n        isActive: newStatus\n      }, {\n        headers: {\n          Authorization: `Bearer ${currentUser.token}`\n        }\n      });\n\n      // Update WebSocket status\n      if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\n        wsRef.current.send(JSON.stringify({\n          type: 'DELIVERY_STATUS_UPDATE',\n          deliveryPersonId: currentUser.id,\n          isActive: newStatus\n        }));\n      }\n\n      // Update local state\n      setDashboardData({\n        ...dashboardData,\n        isActive: newStatus\n      });\n      showNotification(`You are now ${newStatus ? 'online' : 'offline'}.`);\n    } catch (err) {\n      setError('Failed to update your status. Please try again.');\n      console.error('Error toggling status:', err);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center p-10\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spinner-border\",\n      role: \"status\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"sr-only\",\n        children: \"Loading dashboard...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-2\",\n      children: \"Loading dashboard...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 5\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 m-4\",\n    role: \"alert\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => fetchDashboardData(),\n      className: \"mt-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600\",\n      children: \"Try Again\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto px-4 py-8\",\n    children: [notification && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mb-4 flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: notification\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setNotification(null),\n        className: \"text-blue-700\",\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold mb-2 sm:mb-0\",\n        children: \"Delivery Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: `mr-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${dashboardData.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: `h-2 w-2 mr-1 rounded-full ${dashboardData.isActive ? 'bg-green-500' : 'bg-gray-500'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this), \"Status: \", dashboardData.isActive ? 'Active' : 'Inactive']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleActiveStatus,\n          className: `px-4 py-2 rounded-lg ${dashboardData.isActive ? 'bg-red-500 hover:bg-red-600 text-white' : 'bg-green-500 hover:bg-green-600 text-white'}`,\n          children: dashboardData.isActive ? 'Go Offline' : 'Go Online'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this), dashboardData.activeDelivery ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold mb-4\",\n        children: \"Active Delivery\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col md:flex-row justify-between gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-medium\",\n            children: [\"Order #\", dashboardData.activeDelivery.id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600\",\n            children: [\"Restaurant: \", dashboardData.activeDelivery.restaurant.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mb-2\",\n            children: [\"Status: \", dashboardData.activeDelivery.status.replace(/_/g, ' ')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 15\n          }, this), dashboardData.activeDelivery.pickupCode && (dashboardData.activeDelivery.status === 'ASSIGNED_TO_DELIVERY' || dashboardData.activeDelivery.status === 'READY_FOR_PICKUP') && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-yellow-100 text-yellow-800 px-3 py-2 rounded mb-2\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm font-medium\",\n              children: [\"Pickup Code: \", dashboardData.activeDelivery.pickupCode]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium text-green-600\",\n              children: [\"Estimated earnings: $\", dashboardData.activeDelivery.deliveryFee.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/delivery/order/${dashboardData.activeDelivery.id}`,\n            className: \"px-4 py-2 bg-blue-500 text-white text-center rounded hover:bg-blue-600\",\n            children: \"View Order Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this), (dashboardData.activeDelivery.status === 'ASSIGNED_TO_DELIVERY' || dashboardData.activeDelivery.status === 'READY_FOR_PICKUP') && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              const address = dashboardData.activeDelivery.restaurant.address;\n              const formattedAddress = encodeURIComponent(`${address.street}, ${address.city}, ${address.zipCode}`);\n              window.open(`https://www.google.com/maps/search/?api=1&query=${formattedAddress}`, '_blank');\n            },\n            className: \"px-4 py-2 bg-gray-100 text-gray-800 text-center rounded hover:bg-gray-200\",\n            children: \"Navigate to Restaurant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 17\n          }, this), dashboardData.activeDelivery.status === 'PICKED_UP' && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              const address = dashboardData.activeDelivery.deliveryAddress;\n              const formattedAddress = encodeURIComponent(`${address.street}, ${address.city}, ${address.zipCode}`);\n              window.open(`https://www.google.com/maps/search/?api=1&query=${formattedAddress}`, '_blank');\n            },\n            className: \"px-4 py-2 bg-gray-100 text-gray-800 text-center rounded hover:bg-gray-200\",\n            children: \"Navigate to Customer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 9\n    }, this) : dashboardData.isActive && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-green-50 border border-green-200 rounded-lg p-6 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold mb-4\",\n        children: \"No Active Delivery\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-600 mb-4\",\n        children: \"You're online and ready to accept deliveries.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 13\n      }, this), dashboardData.availableOrders > 0 ? /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/delivery/available-orders\",\n        className: \"inline-block px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\",\n        children: [\"View Available Orders (\", dashboardData.availableOrders, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 15\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-500\",\n        children: \"No orders available for delivery at the moment.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-md p-6 border border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold\",\n            children: \"Today's Deliveries\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 bg-blue-100 rounded-full\",\n            children: \"\\uD83D\\uDCE6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-3xl font-bold\",\n          children: dashboardData.deliveredToday\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-md p-6 border border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold\",\n            children: \"Today's Earnings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 bg-green-100 rounded-full\",\n            children: \"\\uD83D\\uDCB0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-3xl font-bold\",\n          children: [\"$\", dashboardData.totalEarningsToday.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-md p-6 border border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold\",\n            children: \"Available Orders\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 bg-yellow-100 rounded-full\",\n            children: \"\\uD83D\\uDCCB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-3xl font-bold\",\n          children: dashboardData.availableOrders\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), dashboardData.availableOrders > 0 && dashboardData.isActive && /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/delivery/available-orders\",\n          className: \"mt-4 inline-block text-sm text-blue-500 hover:text-blue-700\",\n          children: \"View available orders \\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-md p-6 border border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold\",\n          children: \"Recent Deliveries\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/delivery/history\",\n          className: \"text-sm text-blue-500 hover:text-blue-700\",\n          children: \"View All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this), dashboardData.recentDeliveries && dashboardData.recentDeliveries.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full divide-y divide-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Order ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Restaurant\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Earnings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"divide-y divide-gray-200\",\n            children: dashboardData.recentDeliveries.map(delivery => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-3 whitespace-nowrap\",\n                children: [\"#\", delivery.orderId]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-3 whitespace-nowrap\",\n                children: delivery.restaurantName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-3 whitespace-nowrap\",\n                children: new Date(delivery.completedAt).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-3 whitespace-nowrap text-right\",\n                children: [\"$\", delivery.earnings.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-3 whitespace-nowrap text-right\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `inline-flex px-2 text-xs font-semibold rounded-full ${delivery.status === 'DELIVERED' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`,\n                  children: delivery.status.replace(/_/g, ' ')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 21\n              }, this)]\n            }, delivery.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center py-4 text-gray-500\",\n        children: \"No recent deliveries to display.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 5\n  }, this);\n};\n_s(DeliveryDashboard, \"bmCRleuPoyuBZUoZGcxESkuzaF8=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = DeliveryDashboard;\nexport default DeliveryDashboard;\nvar _c;\n$RefreshReg$(_c, \"DeliveryDashboard\");","map":{"version":3,"names":["React","useEffect","useState","useRef","axios","Link","useNavigate","useAuth","jsxDEV","_jsxDEV","DeliveryDashboard","_s","currentUser","navigate","dashboardData","setDashboardData","activeDelivery","deliveredToday","totalEarningsToday","isActive","availableOrders","recentDeliveries","loading","setLoading","error","setError","notification","setNotification","wsRef","token","current","close","wsUrl","process","env","REACT_APP_WS_URL","WebSocket","onopen","console","log","send","JSON","stringify","type","role","deliveryPersonId","id","onmessage","event","data","parse","showNotification","fetchDashboardData","orderId","status","amount","toFixed","onerror","onclose","message","setTimeout","response","get","headers","Authorization","err","interval","setInterval","clearInterval","toggleActiveStatus","newStatus","post","readyState","OPEN","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","restaurant","name","replace","pickupCode","deliveryFee","to","address","formattedAddress","encodeURIComponent","street","city","zipCode","window","open","deliveryAddress","length","map","delivery","restaurantName","Date","completedAt","toLocaleDateString","earnings","_c","$RefreshReg$"],"sources":["/Users/akr4m/Desktop/Food_OrderingApp/frontend/src/pages/delivery/DeliveryDashboard.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\n\nconst DeliveryDashboard = () => {\n  const { currentUser } = useAuth();\n  const navigate = useNavigate();\n  const [dashboardData, setDashboardData] = useState({\n    activeDelivery: null,\n    deliveredToday: 0,\n    totalEarningsToday: 0,\n    isActive: false,\n    availableOrders: 0,\n    recentDeliveries: []\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [notification, setNotification] = useState(null);\n  const wsRef = useRef(null);\n\n  // Initialize WebSocket connection for real-time updates\n  useEffect(() => {\n    if (!currentUser || !currentUser.token) return;\n    \n    // Close any existing connection\n    if (wsRef.current) {\n      wsRef.current.close();\n    }\n    \n    // Create new WebSocket connection\n    const wsUrl = `${process.env.REACT_APP_WS_URL || 'wss://api.yourbackend.com'}/orders`;\n    wsRef.current = new WebSocket(wsUrl);\n    \n    wsRef.current.onopen = () => {\n      console.log('WebSocket connection established');\n      // Identify as a delivery person\n      wsRef.current.send(JSON.stringify({\n        type: 'IDENTIFY',\n        role: 'DELIVERY',\n        deliveryPersonId: currentUser.id\n      }));\n    };\n    \n    wsRef.current.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      \n      if (data.type === 'NEW_AVAILABLE_ORDER') {\n        // Handle new order available for delivery\n        showNotification('New order available for delivery!');\n        fetchDashboardData();\n      } else if (data.type === 'ORDER_ASSIGNED' && data.deliveryPersonId === currentUser.id) {\n        // Handle order assigned to this delivery person\n        showNotification(`Order #${data.orderId} has been assigned to you.`);\n        fetchDashboardData();\n      } else if (data.type === 'ORDER_UPDATE') {\n        // General order updates\n        if (data.status === 'READY_FOR_PICKUP') {\n          showNotification('New order ready for pickup!');\n          fetchDashboardData();\n        } else if (data.deliveryPersonId === currentUser.id) {\n          // Update for your assigned order\n          showNotification(`Order #${data.orderId} status updated to ${data.status}`);\n          fetchDashboardData();\n        }\n      } else if (data.type === 'EARNING_UPDATE' && data.deliveryPersonId === currentUser.id) {\n        // Handle earnings update\n        showNotification(`New earnings: $${data.amount.toFixed(2)}`);\n        fetchDashboardData();\n      }\n    };\n    \n    wsRef.current.onerror = (error) => {\n      console.error('WebSocket error:', error);\n    };\n    \n    wsRef.current.onclose = () => {\n      console.log('WebSocket connection closed');\n    };\n    \n    return () => {\n      if (wsRef.current) {\n        wsRef.current.close();\n      }\n    };\n  }, [currentUser]);\n\n  // Function to show notification\n  const showNotification = (message) => {\n    setNotification(message);\n    // Clear notification after 5 seconds\n    setTimeout(() => {\n      setNotification(null);\n    }, 5000);\n  };\n\n  // Fetch dashboard data\n  const fetchDashboardData = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get('/api/delivery/dashboard', {\n        headers: {\n          Authorization: `Bearer ${currentUser.token}`\n        }\n      });\n      setDashboardData(response.data);\n      setLoading(false);\n    } catch (err) {\n      setError('Failed to fetch dashboard data. Please try again later.');\n      setLoading(false);\n      console.error('Error fetching dashboard data:', err);\n    }\n  };\n\n  useEffect(() => {\n    if (currentUser && currentUser.token) {\n      fetchDashboardData();\n      \n      // Refresh data every minute as a fallback to WebSockets\n      const interval = setInterval(fetchDashboardData, 60000);\n      return () => clearInterval(interval);\n    }\n  }, [currentUser]);\n  \n  // Handle toggle active status\n  const toggleActiveStatus = async () => {\n    try {\n      const newStatus = !dashboardData.isActive;\n      await axios.post('/api/delivery/toggle-status', \n        { isActive: newStatus },\n        {\n          headers: {\n            Authorization: `Bearer ${currentUser.token}`\n          }\n        }\n      );\n      \n      // Update WebSocket status\n      if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\n        wsRef.current.send(JSON.stringify({\n          type: 'DELIVERY_STATUS_UPDATE',\n          deliveryPersonId: currentUser.id,\n          isActive: newStatus\n        }));\n      }\n      \n      // Update local state\n      setDashboardData({\n        ...dashboardData,\n        isActive: newStatus\n      });\n      \n      showNotification(`You are now ${newStatus ? 'online' : 'offline'}.`);\n    } catch (err) {\n      setError('Failed to update your status. Please try again.');\n      console.error('Error toggling status:', err);\n    }\n  };\n\n  if (loading) return (\n    <div className=\"text-center p-10\">\n      <div className=\"spinner-border\" role=\"status\">\n        <span className=\"sr-only\">Loading dashboard...</span>\n      </div>\n      <p className=\"mt-2\">Loading dashboard...</p>\n    </div>\n  );\n  \n  if (error) return (\n    <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 m-4\" role=\"alert\">\n      <p>{error}</p>\n      <button \n        onClick={() => fetchDashboardData()}\n        className=\"mt-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600\"\n      >\n        Try Again\n      </button>\n    </div>\n  );\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      {/* Notification Banner */}\n      {notification && (\n        <div className=\"bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mb-4 flex justify-between items-center\">\n          <p>{notification}</p>\n          <button onClick={() => setNotification(null)} className=\"text-blue-700\">âœ•</button>\n        </div>\n      )}\n      \n      <div className=\"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n        <h1 className=\"text-2xl font-bold mb-2 sm:mb-0\">Delivery Dashboard</h1>\n        \n        <div className=\"flex items-center\">\n          <span className={`mr-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n            dashboardData.isActive \n              ? 'bg-green-100 text-green-800' \n              : 'bg-gray-100 text-gray-800'\n          }`}>\n            <span className={`h-2 w-2 mr-1 rounded-full ${\n              dashboardData.isActive ? 'bg-green-500' : 'bg-gray-500'\n            }`}></span>\n            Status: {dashboardData.isActive ? 'Active' : 'Inactive'}\n          </span>\n          <button\n            onClick={toggleActiveStatus}\n            className={`px-4 py-2 rounded-lg ${\n              dashboardData.isActive \n                ? 'bg-red-500 hover:bg-red-600 text-white' \n                : 'bg-green-500 hover:bg-green-600 text-white'\n            }`}\n          >\n            {dashboardData.isActive ? 'Go Offline' : 'Go Online'}\n          </button>\n        </div>\n      </div>\n      \n      {/* Active Delivery Section */}\n      {dashboardData.activeDelivery ? (\n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6\">\n          <h2 className=\"text-lg font-semibold mb-4\">Active Delivery</h2>\n          <div className=\"flex flex-col md:flex-row justify-between gap-4\">\n            <div>\n              <p className=\"font-medium\">Order #{dashboardData.activeDelivery.id}</p>\n              <p className=\"text-sm text-gray-600\">Restaurant: {dashboardData.activeDelivery.restaurant.name}</p>\n              <p className=\"text-sm text-gray-600 mb-2\">Status: {dashboardData.activeDelivery.status.replace(/_/g, ' ')}</p>\n              \n              {/* Show pickup code if available */}\n              {dashboardData.activeDelivery.pickupCode && \n               (dashboardData.activeDelivery.status === 'ASSIGNED_TO_DELIVERY' || \n                dashboardData.activeDelivery.status === 'READY_FOR_PICKUP') && (\n                <div className=\"bg-yellow-100 text-yellow-800 px-3 py-2 rounded mb-2\">\n                  <p className=\"text-sm font-medium\">Pickup Code: {dashboardData.activeDelivery.pickupCode}</p>\n                </div>\n              )}\n              \n              {/* Estimated earnings */}\n              <div className=\"mt-2\">\n                <span className=\"text-sm font-medium text-green-600\">\n                  Estimated earnings: ${dashboardData.activeDelivery.deliveryFee.toFixed(2)}\n                </span>\n              </div>\n            </div>\n            <div className=\"flex flex-col gap-2\">\n              <Link\n                to={`/delivery/order/${dashboardData.activeDelivery.id}`}\n                className=\"px-4 py-2 bg-blue-500 text-white text-center rounded hover:bg-blue-600\"\n              >\n                View Order Details\n              </Link>\n              \n              {/* Navigation buttons based on status */}\n              {(dashboardData.activeDelivery.status === 'ASSIGNED_TO_DELIVERY' || \n                dashboardData.activeDelivery.status === 'READY_FOR_PICKUP') && (\n                <button\n                  onClick={() => {\n                    const address = dashboardData.activeDelivery.restaurant.address;\n                    const formattedAddress = encodeURIComponent(\n                      `${address.street}, ${address.city}, ${address.zipCode}`\n                    );\n                    window.open(`https://www.google.com/maps/search/?api=1&query=${formattedAddress}`, '_blank');\n                  }}\n                  className=\"px-4 py-2 bg-gray-100 text-gray-800 text-center rounded hover:bg-gray-200\"\n                >\n                  Navigate to Restaurant\n                </button>\n              )}\n              \n              {dashboardData.activeDelivery.status === 'PICKED_UP' && (\n                <button\n                  onClick={() => {\n                    const address = dashboardData.activeDelivery.deliveryAddress;\n                    const formattedAddress = encodeURIComponent(\n                      `${address.street}, ${address.city}, ${address.zipCode}`\n                    );\n                    window.open(`https://www.google.com/maps/search/?api=1&query=${formattedAddress}`, '_blank');\n                  }}\n                  className=\"px-4 py-2 bg-gray-100 text-gray-800 text-center rounded hover:bg-gray-200\"\n                >\n                  Navigate to Customer\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      ) : (\n        dashboardData.isActive && (\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-6 mb-6\">\n            <h2 className=\"text-lg font-semibold mb-4\">No Active Delivery</h2>\n            <p className=\"text-sm text-gray-600 mb-4\">You're online and ready to accept deliveries.</p>\n            {dashboardData.availableOrders > 0 ? (\n              <Link\n                to=\"/delivery/available-orders\"\n                className=\"inline-block px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\n              >\n                View Available Orders ({dashboardData.availableOrders})\n              </Link>\n            ) : (\n              <p className=\"text-sm text-gray-500\">No orders available for delivery at the moment.</p>\n            )}\n          </div>\n        )\n      )}\n      \n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n        {/* Today's Deliveries */}\n        <div className=\"bg-white rounded-lg shadow-md p-6 border border-gray-200\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"font-semibold\">Today's Deliveries</h3>\n            <div className=\"p-2 bg-blue-100 rounded-full\">\n              ðŸ“¦\n            </div>\n          </div>\n          <p className=\"text-3xl font-bold\">{dashboardData.deliveredToday}</p>\n        </div>\n        \n        {/* Today's Earnings */}\n        <div className=\"bg-white rounded-lg shadow-md p-6 border border-gray-200\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"font-semibold\">Today's Earnings</h3>\n            <div className=\"p-2 bg-green-100 rounded-full\">\n              ðŸ’°\n            </div>\n          </div>\n          <p className=\"text-3xl font-bold\">${dashboardData.totalEarningsToday.toFixed(2)}</p>\n        </div>\n        \n        {/* Available Orders */}\n        <div className=\"bg-white rounded-lg shadow-md p-6 border border-gray-200\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"font-semibold\">Available Orders</h3>\n            <div className=\"p-2 bg-yellow-100 rounded-full\">\n              ðŸ“‹\n            </div>\n          </div>\n          <p className=\"text-3xl font-bold\">{dashboardData.availableOrders}</p>\n          {dashboardData.availableOrders > 0 && dashboardData.isActive && (\n            <Link\n              to=\"/delivery/available-orders\"\n              className=\"mt-4 inline-block text-sm text-blue-500 hover:text-blue-700\"\n            >\n              View available orders â†’\n            </Link>\n          )}\n        </div>\n      </div>\n      \n      {/* Recent Deliveries */}\n      <div className=\"bg-white rounded-lg shadow-md p-6 border border-gray-200\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-lg font-semibold\">Recent Deliveries</h2>\n          <Link\n            to=\"/delivery/history\"\n            className=\"text-sm text-blue-500 hover:text-blue-700\"\n          >\n            View All\n          </Link>\n        </div>\n        \n        {dashboardData.recentDeliveries && dashboardData.recentDeliveries.length > 0 ? (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead>\n                <tr>\n                  <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Order ID</th>\n                  <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Restaurant</th>\n                  <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\n                  <th className=\"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Earnings</th>\n                  <th className=\"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {dashboardData.recentDeliveries.map((delivery) => (\n                  <tr key={delivery.id}>\n                    <td className=\"px-4 py-3 whitespace-nowrap\">#{delivery.orderId}</td>\n                    <td className=\"px-4 py-3 whitespace-nowrap\">{delivery.restaurantName}</td>\n                    <td className=\"px-4 py-3 whitespace-nowrap\">{new Date(delivery.completedAt).toLocaleDateString()}</td>\n                    <td className=\"px-4 py-3 whitespace-nowrap text-right\">${delivery.earnings.toFixed(2)}</td>\n                    <td className=\"px-4 py-3 whitespace-nowrap text-right\">\n                      <span className={`inline-flex px-2 text-xs font-semibold rounded-full ${\n                        delivery.status === 'DELIVERED' \n                          ? 'bg-green-100 text-green-800' \n                          : 'bg-gray-100 text-gray-800'\n                      }`}>\n                        {delivery.status.replace(/_/g, ' ')}\n                      </span>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        ) : (\n          <p className=\"text-center py-4 text-gray-500\">No recent deliveries to display.</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default DeliveryDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}